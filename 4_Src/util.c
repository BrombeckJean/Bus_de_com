/********************************************************************************
  * @file           : util.c
  * @brief          : Useful function
  *******************************************************************************/

//----------------- INCLUDE +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ INCLUDE --------------------------------------------------------*/
#include "util.h"
#include <stdint.h>
#include <stdio.h>
#include "stm32f446xx.h"
#include "usart.h"

//----------------- IO PUTCHAR ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ IO PUTCHAR -----------------------------------------------------*/
/* Send on USART2 PA2*/
int __io_putchar(int ch){
	USART2_TransmitChar(ch);
	return 0;
}

//----------------- IO GETCHAR ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ IO GETCHAR -----------------------------------------------------*/
/* Receive on USART2 PA3 */
int __io_getchar(void){
	return USART2_ReceiveChar();
}

//----------------- SCANF INIT ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ SCANF INIT -----------------------------------------------------*/
/* For scanf function */
void SCANF_Init(void){
	setvbuf(stdin, NULL, _IONBF, 0);
}

//----------------- FPU INIT ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ FPU INIT -------------------------------------------------------*/
void FPU_Init(void){
	SCB->CPACR |= ((3UL << 20U)|(3UL << 22U));
}

//----------------- MASQUE 8BIT +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ MASQUE 8BIT ----------------------------------------------------*/
uint8_t masque_8bit (uint8_t num_mask)
{
    uint8_t val = 0;
    val = 1 << (num_mask -1);
    return val;
}
